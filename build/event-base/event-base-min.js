YUI.add("event-base",function(m,e){m.publish("domready",{fireOnce:!0,"async":!0}),YUI.Env.DOMReady?m.fire("domready"):m.Do.before(function(){m.fire("domready")},YUI.Env,"_ready");var i=m.UA,a={},l={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,25:9,63272:46,63273:36,63275:35},o=function(e){if(!e)return e;try{e&&3==e.nodeType&&(e=e.parentNode)}catch(t){return null}return m.one(e)},t=function(e,t,n){this._event=e,this._currentTarget=t,this._wrapper=n||a,this.init()};m.extend(t,Object,{init:function(){var e=this._event,t=this._wrapper.overrides,n=e.pageX,a=e.pageY,r=this._currentTarget;this.altKey=e.altKey,this.ctrlKey=e.ctrlKey,this.metaKey=e.metaKey,this.shiftKey=e.shiftKey,this.type=t&&t.type||e.type,this.clientX=e.clientX,this.clientY=e.clientY,this.pageX=n,this.pageY=a,a=e.keyCode||e.charCode,i.webkit&&a in l&&(a=l[a]),this.keyCode=a,this.charCode=a,this.which=e.which||e.charCode||a,this.button=this.which,this.target=o(e.target),this.currentTarget=o(r),this.relatedTarget=o(e.relatedTarget),"mousewheel"!=e.type&&"DOMMouseScroll"!=e.type||(this.wheelDelta=e.detail?-1*e.detail:Math.round(e.wheelDelta/80)||(e.wheelDelta<0?-1:1)),this._touch&&this._touch(e,r,this._wrapper)},stopPropagation:function(){this._event.stopPropagation(),this._wrapper.stopped=1,this.stopped=1},stopImmediatePropagation:function(){var e=this._event;e.stopImmediatePropagation?e.stopImmediatePropagation():this.stopPropagation(),this._wrapper.stopped=2,this.stopped=2},preventDefault:function(e){var t=this._event;t.preventDefault(),e&&(t.returnValue=e),this._wrapper.prevented=1,this.prevented=1},halt:function(e){e?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()}}),t.resolve=o,m.DOM2EventFacade=t,m.DOMEventFacade=t,function(){m.Env.evt.dom_wrappers={},m.Env.evt.dom_map={};var o,u,d,s,c,i=m.Env.evt,e=m.config,p=e.win,h=YUI.Env.add,a=YUI.Env.remove,t=function(){YUI.Env.windowLoaded=!0,m.Event._load(),a(p,"load",t)},r=function(){m.Event._unload()},n="domready",v="~yui|2|compat~",f=function(e){try{return e&&"string"!=typeof e&&m.Lang.isNumber(e.length)&&!e.tagName&&!m.DOM.isWindow(e)}catch(t){return!1}},l=m.CustomEvent.prototype._delete,y=function(e){var t=l.apply(this,arguments);return this.hasSubs()||m.Event._clean(this),t},g=(o=!1,u=0,d=[],s=i.dom_wrappers,c=i.dom_map,{POLL_RETRYS:1e3,POLL_INTERVAL:40,lastError:null,_interval:null,_dri:null,DOMReady:!1,startInterval:function(){g._interval||(g._interval=setInterval(g._poll,g.POLL_INTERVAL))},onAvailable:function(e,t,n,a,r,i){for(var l,o=m.Array(e),c=0;c<o.length;c+=1)d.push({id:o[c],fn:t,obj:n,override:a,checkReady:r,compat:i});return u=this.POLL_RETRYS,setTimeout(g._poll,0),l=new m.EventHandle({_delete:function(){if(l.handle)l.handle.detach();else for(var e,t=0;t<o.length;t++)for(e=0;e<d.length;e++)o[t]===d[e].id&&d.splice(e,1)}})},onContentReady:function(e,t,n,a,r){return g.onAvailable(e,t,n,a,!0,r)},attach:function(e,t,n,a){return g._attach(m.Array(arguments,0,!0))},_createWrapper:function(t,e,n,a,r){var i,l=m.stamp(t),o="event:"+l+e;return!1===r&&(o+="native"),n&&(o+="capture"),(i=s[o])||((i=m.publish(o,{silent:!0,bubbles:!1,emitFacade:!1,contextFn:function(){return a?i.el:(i.nodeRef=i.nodeRef||m.one(i.el),i.nodeRef)}})).overrides={},i.el=t,i.key=o,i.domkey=l,i.type=e,i.fn=function(e){i.fire(g.getEvent(e,t,a||!1===r))},i.capture=n,t==p&&"load"==e&&(i.fireOnce=!0,0),i._delete=y,s[o]=i,c[l]=c[l]||{},c[l][o]=i,h(t,e,i.fn,n)),i},_attach:function(n,a){var r,e,t,i,l=!1,o=n[0],c=n[1],u=n[2]||p,d=a&&a.facade,s=a&&a.capture,h=a&&a.overrides;if(n[n.length-1]===v&&(t=!0),!c||!c.call)return!1;if(f(u))return r=[],m.each(u,function(e,t){n[2]=e,r.push(g._attach(n.slice(),a))}),new m.EventHandle(r);if(m.Lang.isString(u)){if(t)e=m.DOM.byId(u);else switch((e=m.Selector.query(u)).length){case 0:e=null;break;case 1:e=e[0];break;default:return n[2]=e,g._attach(n,a)}if(!e)return i=g.onAvailable(u,function(){i.handle=g._attach(n,a)},g,!0,!1,t);u=e}return!!u&&(m.Node&&m.instanceOf(u,m.Node)&&(u=m.Node.getDOMNode(u)),d=g._createWrapper(u,o,s,t,d),h&&m.mix(d.overrides,h),u==p&&"load"==o&&YUI.Env.windowLoaded&&(l=!0),t&&n.pop(),t=n[3],i=d._on(c,t,4<n.length?n.slice(4):null),l&&d.fire(),i)},detach:function(e,t,n,a){var r,i,l,o,c=m.Array(arguments,0,!0);if(c[c.length-1]===v&&(o=!0),e&&e.detach)return e.detach();if("string"==typeof n&&(o?n=m.DOM.byId(n):(r=(n=m.Selector.query(n)).length)<1?n=null:1==r&&(n=n[0])),!n)return!1;if(n.detach)return c.splice(2,1),n.detach.apply(n,c);if(f(n)){for(i=!0,l=0,r=n.length;l<r;++l)c[2]=n[l],i=m.Event.detach.apply(m.Event,c)&&i;return i}return e&&t&&t.call?(o="event:"+m.stamp(n)+e,!!(o=s[o])&&o.detach(t)):g.purgeElement(n,!1,e)},getEvent:function(e,t,n){var a=e||p.event;return n?a:new m.DOMEventFacade(a,t,s["event:"+m.stamp(t)+e.type])},generateId:function(e){return m.DOM.generateID(e)},_isValidCollection:f,_load:function(e){o||(o=!0,m.fire&&m.fire(n),g._poll())},_poll:function(){if(!g.locked)if(!m.UA.ie||YUI.Env.DOMReady){g.locked=!0;for(var e,t,n=(n=!o)||0<u,a=[],r=function(e,t){var n,a=t.override;try{t.compat?(n=t.override?!0===a?t.obj:a:e,t.fn.call(n,t.obj)):(n=t.obj||m.one(e),t.fn.apply(n,m.Lang.isArray(a)?a:[]))}catch(r){}},i=0,l=d.length;i<l;++i)(e=d[i])&&!e.checkReady&&((t=e.compat?m.DOM.byId(e.id):m.Selector.query(e.id,null,!0))?(r(t,e),d[i]=null):a.push(e));for(i=0,l=d.length;i<l;++i)(e=d[i])&&e.checkReady&&((t=e.compat?m.DOM.byId(e.id):m.Selector.query(e.id,null,!0))?(o||t.get&&t.get("nextSibling")||t.nextSibling)&&(r(t,e),d[i]=null):a.push(e));u=0===a.length?0:u-1,n?g.startInterval():(clearInterval(g._interval),g._interval=null),g.locked=!1}else g.startInterval()},purgeElement:function(e,t,n){var a,r,i,l,e=m.Lang.isString(e)?m.Selector.query(e,null,!0):e,o=g.getListeners(e,n);if(t&&e)for(o=o||[],r=(i=m.Selector.query("*",e)).length,a=0;a<r;++a)(l=g.getListeners(i[a],n))&&(o=o.concat(l));if(o)for(a=0,r=o.length;a<r;++a)o[a].detachAll()},_clean:function(e){var t=e.key,n=e.domkey;a(e.el,e.type,e.fn,e.capture),
delete s[t],delete m._yuievt.events[t],c[n]&&(delete c[n][t],m.Object.size(c[n])||delete c[n])},getListeners:function(e,t){var n=m.stamp(e,!0),a=c[n],r=[],e=t?"event:"+n+t:null,n=i.plugins;return a?(e?(n[t]&&n[t].eventDef&&(e+="_synth"),a[e]&&r.push(a[e]),a[e+="native"]&&r.push(a[e])):m.each(a,function(e,t){r.push(e)}),r.length?r:null):null},_unload:function(n){m.each(s,function(e,t){"unload"==e.type&&e.fire(n),e.detachAll()}),a(p,"unload",r)},nativeAdd:h,nativeRemove:a});if(m.Event=g,e.injected||YUI.Env.windowLoaded?t():h(p,"load",t),m.UA.ie&&(m.on(n,g._poll),m.UA.ie<7))try{h(p,"unload",r)}catch(_){}g.Custom=m.CustomEvent,g.Subscriber=m.Subscriber,g.Target=m.EventTarget,g.Handle=m.EventHandle,g.Facade=m.EventFacade,g._poll()}(),m.Env.evt.plugins.available={on:function(e,t,n,a){var r=4<arguments.length?m.Array(arguments,4,!0):null;return m.Event.onAvailable.call(m.Event,n,t,a,r)}},m.Env.evt.plugins.contentready={on:function(e,t,n,a){var r=4<arguments.length?m.Array(arguments,4,!0):null;return m.Event.onContentReady.call(m.Event,n,t,a,r)}}},"@VERSION@",{requires:["event-custom-base"]});
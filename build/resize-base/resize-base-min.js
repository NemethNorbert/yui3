YUI.add("resize-base",function(o,e){var t=o.Lang,i=t.isArray,n=t.isBoolean,a=t.isNumber,r=t.isString,s=o.Array,d=t.trim,l=s.indexOf,u="{handle}",h="activeHandle",f="activeHandleNode",g="autoHide",c="border",p="handle",_="handles",v="handlesWrapper",H="inner",E="left",b="node",S="offsetHeight",z="offsetWidth",A="parentNode",I="resize",m="resizing",R="static",L="top",T="wrap",y="wrapper",N="resize:mouseUp",W="resize:resize",U="resize:align",C="resize:end",M="resize:start",F=function(){return Array.prototype.slice.call(arguments).join(" ")},w=function(e){return Math.round(parseFloat(e))||0},X=function(e,t){return e.getComputedStyle(t)},B=function(e){return p+e.toUpperCase()},G=function(e){return e instanceof o.Node},D=o.cached(function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}),P=o.cached(function(){var n=[],e=s(arguments,0,!0);return s.each(e,function(e,t){0<t&&(e=D(e)),n.push(e)}),n.join("")}),x=o.ClassNameManager.getClassName,Y=x(I),V=x(I,p),O=x(I,p,"active"),k=x(I,p,H),$=x(I,p,H,u),t=x(I,p,u),j=x(I,"hidden",_),H=x(I,_,y),u=x(I,y);function q(){q.superclass.constructor.apply(this,arguments)}o.mix(q,{NAME:I,ATTRS:{activeHandle:{value:null,validator:function(e){return o.Lang.isString(e)||o.Lang.isNull(e)}},activeHandleNode:{value:null,validator:G},autoHide:{value:!1,validator:n},defMinHeight:{value:15,validator:a},defMinWidth:{value:15,validator:a},handles:{setter:"_setHandles",value:"all"},handlesWrapper:{readOnly:!0,setter:o.one,valueFn:"_valueHandlesWrapper"},node:{setter:o.one},resizing:{value:!1,validator:n},wrap:{setter:"_setWrap",value:!1,validator:n},wrapTypes:{readOnly:!0,value:/^canvas|textarea|input|select|button|img|iframe|table|embed$/i},wrapper:{readOnly:!0,valueFn:"_valueWrapper",writeOnce:!0}},RULES:{b:function(e,t,n){var i=e.info,e=e.originalInfo;i.offsetHeight=e.offsetHeight+n},l:function(e,t){var n=e.info,e=e.originalInfo;n.left=e.left+t,n.offsetWidth=e.offsetWidth-t},r:function(e,t){var n=e.info,e=e.originalInfo;n.offsetWidth=e.offsetWidth+t},t:function(e,t,n){var i=e.info,e=e.originalInfo;i.top=e.top+n,i.offsetHeight=e.offsetHeight-n},tr:function(){this.t.apply(this,arguments),this.r.apply(this,arguments)},bl:function(){this.b.apply(this,arguments),this.l.apply(this,arguments)},br:function(){this.b.apply(this,arguments),this.r.apply(this,arguments)},tl:function(){this.t.apply(this,arguments),this.l.apply(this,arguments)}},capitalize:P}),o.Resize=o.extend(q,o.Base,{ALL_HANDLES:["t","tr","r","br","b","bl","l","tl"],REGEX_CHANGE_HEIGHT:/^(t|tr|b|bl|br|tl)$/i,REGEX_CHANGE_LEFT:/^(tl|l|bl)$/i,REGEX_CHANGE_TOP:/^(tl|t|tr)$/i,REGEX_CHANGE_WIDTH:/^(bl|br|l|r|tl|tr)$/i,HANDLES_WRAP_TEMPLATE:'<div class="'+H+'"></div>',WRAP_TEMPLATE:'<div class="'+u+'"></div>',HANDLE_TEMPLATE:'<div class="'+F(V,t)+'"><div class="'+F(k,$)+'">&nbsp;</div></div>',totalHSurrounding:0,totalVSurrounding:0,nodeSurrounding:null,wrapperSurrounding:null,changeHeightHandles:!1,changeLeftHandles:!1,changeTopHandles:!1,changeWidthHandles:!1,delegate:null,info:null,lastInfo:null,originalInfo:null,initializer:function(){this._eventHandles=[],this.renderer()},renderUI:function(){this._renderHandles()},bindUI:function(){this._createEvents(),this._bindDD(),this._bindHandle()},syncUI:function(){this.get(b).addClass(Y),this._setHideHandlesUI(this.get(g))},destructor:function(){var t=this,e=t.get(b),n=t.get(y),i=n.get(A);o.each(t._eventHandles,function(e){e.detach()}),t._eventHandles.length=0,t.eachHandle(function(e){t.delegate.dd.destroy(),e.remove(!0)}),t.delegate.destroy(),t.get(T)&&(t._copyStyles(n,e),i&&i.insertBefore(e,n),n.remove(!0)),e.removeClass(Y),e.removeClass(j)},renderer:function(){this.renderUI(),this.bindUI(),this.syncUI()},eachHandle:function(i){var a=this;o.each(a.get(_),function(e,t){var n=a.get(B(e));i.apply(a,[n,e,t])})},_bindDD:function(){var e=this;e.delegate=new o.DD.Delegate({bubbleTargets:e,container:e.get(v),dragConfig:{clickPixelThresh:0,clickTimeThresh:0,useShim:!0,move:!1},nodes:"."+V,target:!1}),e._eventHandles.push(e.on("drag:drag",e._handleResizeEvent),e.on("drag:dropmiss",e._handleMouseUpEvent),e.on("drag:end",e._handleResizeEndEvent),e.on("drag:start",e._handleResizeStartEvent))},_bindHandle:function(){var e=this,t=e.get(y);e._eventHandles.push(t.on("mouseenter",o.bind(e._onWrapperMouseEnter,e)),t.on("mouseleave",o.bind(e._onWrapperMouseLeave,e)),t.delegate("mouseenter",o.bind(e._onHandleMouseEnter,e),"."+V),t.delegate("mouseleave",o.bind(e._onHandleMouseLeave,e),"."+V))},_createEvents:function(){var n=this,e=function(e,t){n.publish(e,{defaultFn:t,queuable:!1,emitFacade:!0,bubbles:!0,prefix:I})};e(M,this._defResizeStartFn),e(W,this._defResizeFn),e(U,this._defResizeAlignFn),e(C,this._defResizeEndFn),e(N,this._defMouseUpFn)},_renderHandles:function(){var e=this.get(y),t=this.get(v);this.eachHandle(function(e){t.append(e)}),e.append(t)},_buildHandle:function(e){return o.Node.create(o.Lang.sub(this.HANDLE_TEMPLATE,{handle:e}))},_calcResize:function(){var e=this.handle,t=this.info,n=this.originalInfo,i=t.actXY[0]-n.actXY[0],n=t.actXY[1]-n.actXY[1];e&&o.Resize.RULES[e]&&o.Resize.RULES[e](this,i,n)},_checkSize:function(e,t){var n=this.info,i=this.originalInfo,a=e===S?L:E;n[e]=t,(a==E&&this.changeLeftHandles||a==L&&this.changeTopHandles)&&(n[a]=i[a]+i[e]-t)},_copyStyles:function(e,t){var n=e.getStyle("position").toLowerCase(),i=this._getBoxSurroundingInfo(e),n={position:n=n===R?"relative":n,left:X(e,E),top:X(e,L)};o.mix(n,i.margin),o.mix(n,i.border),t.setStyles(n),e.setStyles({border:0,margin:0}),t.sizeTo(e.get(z)+i.totalHBorder,e.get(S)+i.totalVBorder)},_extractHandleName:o.cached(function(e){e=e.get("className").match(new RegExp(x(I,p,"(\\w{1,2})\\b")));return e?e[1]:null}),_getInfo:function(e,t){var n=[0,0],i=t.dragEvent.target,a=e.getXY(),r=a[0],s=a[1],a=e.get(S),e=e.get(z);return{actXY:n=t?i.actXY.length?i.actXY:i.lastXY:n,bottom:s+a,left:r,offsetHeight:a,offsetWidth:e,right:r+e,top:s}},_getBoxSurroundingInfo:function(r){var s={padding:{},margin:{},border:{}};return G(r
)&&o.each([L,"right","bottom",E],function(e){var t=P("padding",e),n=P("margin",e),i=P(c,e,"width"),a=P(c,e,"color"),e=P(c,e,"style");s.border[a]=X(r,a),s.border[e]=X(r,e),s.border[i]=X(r,i),s.margin[n]=X(r,n),s.padding[t]=X(r,t)}),s.totalHBorder=w(s.border.borderLeftWidth)+w(s.border.borderRightWidth),s.totalHPadding=w(s.padding.paddingLeft)+w(s.padding.paddingRight),s.totalVBorder=w(s.border.borderBottomWidth)+w(s.border.borderTopWidth),s.totalVPadding=w(s.padding.paddingBottom)+w(s.padding.paddingTop),s},_syncUI:function(){var e=this,t=e.info,n=e.wrapperSurrounding,i=e.get(y),a=e.get(b);i.sizeTo(t.offsetWidth,t.offsetHeight),(e.changeLeftHandles||e.changeTopHandles)&&i.setXY([t.left,t.top]),i.compareTo(a)||a.sizeTo(t.offsetWidth-n.totalHBorder,t.offsetHeight-n.totalVBorder),o.UA.webkit&&a.setStyle(I,"none")},_updateChangeHandleInfo:function(e){var t=this;t.changeHeightHandles=t.REGEX_CHANGE_HEIGHT.test(e),t.changeLeftHandles=t.REGEX_CHANGE_LEFT.test(e),t.changeTopHandles=t.REGEX_CHANGE_TOP.test(e),t.changeWidthHandles=t.REGEX_CHANGE_WIDTH.test(e)},_updateInfo:function(e){this.info=this._getInfo(this.get(y),e)},_updateSurroundingInfo:function(){var e=this,t=e.get(b),n=e.get(y),t=e._getBoxSurroundingInfo(t),n=e._getBoxSurroundingInfo(n);e.nodeSurrounding=t,e.wrapperSurrounding=n,e.totalVSurrounding=t.totalVPadding+n.totalVBorder,e.totalHSurrounding=t.totalHPadding+n.totalHBorder},_setActiveHandlesUI:function(e){var t=this.get(f);t&&(e?(this.eachHandle(function(e){e.removeClass(O)}),t.addClass(O)):t.removeClass(O))},_setHandles:function(e){var t=this,n=[];return i(e)?n=e:r(e)&&("all"===e.toLowerCase()?n=t.ALL_HANDLES:o.each(e.split(","),function(e){e=d(e);-1<l(t.ALL_HANDLES,e)&&n.push(e)})),n},_setHideHandlesUI:function(e){var t=this.get(y);this.get(m)||(e?t.addClass(j):t.removeClass(j))},_setWrap:function(e){var t=this.get(b).get("nodeName");return e=this.get("wrapTypes").test(t)?!0:e},_defMouseUpFn:function(){this.set(m,!1)},_defResizeFn:function(e){this._resize(e)},_resize:function(e){this._handleResizeAlignEvent(e.dragEvent),this._syncUI()},_defResizeAlignFn:function(e){this._resizeAlign(e)},_resizeAlign:function(e){var t,n,i=this;i.lastInfo=i.info,i._updateInfo(e),t=i.info,i._calcResize(),i.con||(n=i.get("defMinHeight")+i.totalVSurrounding,e=i.get("defMinWidth")+i.totalHSurrounding,t.offsetHeight<=n&&i._checkSize(S,n),t.offsetWidth<=e&&i._checkSize(z,e))},_defResizeEndFn:function(e){this._resizeEnd(e)},_resizeEnd:function(e){var t=this;e.dragEvent.target.actXY=[],t._syncUI(),t._setActiveHandlesUI(!1),t.set(h,null),t.set(f,null),t.handle=null},_defResizeStartFn:function(e){this._resizeStart(e)},_resizeStart:function(e){var t=this,n=t.get(y);t.handle=t.get(h),t.set(m,!0),t._updateSurroundingInfo(),t.originalInfo=t._getInfo(n,e),t._updateInfo(e)},_handleMouseUpEvent:function(e){this.fire(N,{dragEvent:e,info:this.info})},_handleResizeEvent:function(e){this.fire(W,{dragEvent:e,info:this.info})},_handleResizeAlignEvent:function(e){this.fire(U,{dragEvent:e,info:this.info})},_handleResizeEndEvent:function(e){this.fire(C,{dragEvent:e,info:this.info})},_handleResizeStartEvent:function(e){this.get(h)||this._setHandleFromNode(e.target.get("node")),this.fire(M,{dragEvent:e,info:this.info})},_onWrapperMouseEnter:function(){this.get(g)&&this._setHideHandlesUI(!1)},_onWrapperMouseLeave:function(){this.get(g)&&this._setHideHandlesUI(!0)},_setHandleFromNode:function(e){var t=this,n=t._extractHandleName(e);t.get(m)||(t.set(h,n),t.set(f,e),t._setActiveHandlesUI(!0),t._updateChangeHandleInfo(n))},_onHandleMouseEnter:function(e){this._setHandleFromNode(e.currentTarget)},_onHandleMouseLeave:function(){this.get(m)||this._setActiveHandlesUI(!1)},_valueHandlesWrapper:function(){return o.Node.create(this.HANDLES_WRAP_TEMPLATE)},_valueWrapper:function(){var e=this.get(b),t=e.get(A),n=e;return this.get(T)&&(n=o.Node.create(this.WRAP_TEMPLATE),t&&t.insertBefore(n,e),n.append(e),this._copyStyles(e,n),e.setStyles({position:R,left:0,top:0})),n}}),o.each(o.Resize.prototype.ALL_HANDLES,function(e){o.Resize.ATTRS[B(e)]={setter:function(){return this._buildHandle(e)},value:null,writeOnce:!0}})},"@VERSION@",{requires:["base","widget","event","oop","dd-drag","dd-delegate","dd-drop"],skinnable:!0});
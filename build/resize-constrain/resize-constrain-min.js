YUI.add("resize-constrain",function(v,t){var e=v.Lang,i=e.isBoolean,H=e.isNumber,n=e.isString,h=v.Resize.capitalize,o=function(t){return t instanceof v.Node},_=function(t){return parseFloat(t)||0},s="border",k="constrain",R="host",r="offsetHeight",a="offsetWidth",g="width";function c(){c.superclass.constructor.apply(this,arguments)}v.mix(c,{NAME:"resizeConstrained",NS:"con",ATTRS:{constrain:{setter:function(t){return t=t&&(o(t)||n(t)||t.nodeType)?v.one(t):t}},minHeight:{value:15,validator:H},minWidth:{value:15,validator:H},maxHeight:{value:Infinity,validator:H},maxWidth:{value:Infinity,validator:H},preserveRatio:{value:!1,validator:i},tickX:{value:!1},tickY:{value:!1}}}),v.extend(c,v.Plugin.Base,{constrainSurrounding:null,initializer:function(){var t=this,e=t.get(R);e.delegate.dd.plug(v.Plugin.DDConstrained,{tickX:t.get("tickX"),tickY:t.get("tickY")}),e.after("resize:align",v.bind(t._handleResizeAlignEvent,t)),e.on("resize:start",v.bind(t._handleResizeStartEvent,t))},_checkConstrain:function(t,e,i){var n=this,o=n.get(R).info,r=n.constrainSurrounding.border,a=n._getConstrainRegion();a&&(n=o[t]+o[i],(e=a[e]-_(r[h(s,e,g)]))<=n&&(o[i]-=n-e),(e=o[t])<=(r=a[t]+_(r[h(s,t,g)]))&&(o[t]+=r-e,o[i]-=r-e))},_checkHeight:function(){var t=this.get(R),e=t.info,i=this.get("maxHeight")+t.totalVSurrounding,n=this.get("minHeight")+t.totalVSurrounding;this._checkConstrain("top","bottom",r),e.offsetHeight>i&&t._checkSize(r,i),e.offsetHeight<n&&t._checkSize(r,n)},_checkRatio:function(){var t,e,i=this,n=i.get(R),o=n.info,r=n.originalInfo,a=r.offsetWidth,h=r.offsetHeight,s=r.top,g=r.left,c=r.bottom,d=r.right,f=function(){return o.offsetWidth/a},u=function(){return o.offsetHeight/h},l=n.changeHeightHandles;i.get(k)&&n.changeHeightHandles&&n.changeWidthHandles&&(t=i._getConstrainRegion(),e=i.constrainSurrounding.border,r=t.bottom-_(e.borderBottomWidth)-c,c=g-(t.left+_(e.borderLeftWidth)),d=t.right-_(e.borderRightWidth)-d,e=s-(t.top+_(e.borderTopWidth)),l=n.changeLeftHandles&&n.changeTopHandles?e<c:n.changeLeftHandles?r<c:n.changeTopHandles?e<d:r<d),l?(o.offsetWidth=a*u(),i._checkWidth(),o.offsetHeight=h*f()):(o.offsetHeight=h*f(),i._checkHeight(),o.offsetWidth=a*u()),n.changeTopHandles&&(o.top=s+(h-o.offsetHeight)),n.changeLeftHandles&&(o.left=g+(a-o.offsetWidth)),v.each(o,function(t,e){H(t)&&(o[e]=Math.round(t))})},_checkRegion:function(){var t=this.get(R),e=this._getConstrainRegion();return v.DOM.inRegion(null,e,!0,t.info)},_checkWidth:function(){var t=this.get(R),e=t.info,i=this.get("maxWidth")+t.totalHSurrounding,n=this.get("minWidth")+t.totalHSurrounding;this._checkConstrain("left","right",a),e.offsetWidth<n&&t._checkSize(a,n),e.offsetWidth>i&&t._checkSize(a,i)},_getConstrainRegion:function(){var t=this.get(R).get("node"),e=this.get(k),i=null;return i=e?"view"===e?t.get("viewportRegion"):o(e)?e.get("region"):e:i},_handleResizeAlignEvent:function(){var t=this,e=t.get(R);t._checkHeight(),t._checkWidth(),t.get("preserveRatio")&&t._checkRatio(),t.get(k)&&!t._checkRegion()&&(e.info=e.lastInfo)},_handleResizeStartEvent:function(){var t=this.get(k),e=this.get(R);this.constrainSurrounding=e._getBoxSurroundingInfo(t)}}),v.namespace("Plugin"),v.Plugin.ResizeConstrained=c},"@VERSION@",{requires:["plugin","resize-base"]});